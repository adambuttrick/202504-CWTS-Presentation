{
  "profile_description": "DataCite Author/Affiliation/ROR Extractor Profile",
  "source_info": {
    "source_id": "src_datacite",
    "source_name": "DataCite",
    "source_description": "DataCite"
  },
  "process_info": {
    "process_id": "proc_datacite_data_file_full_ingest",
    "process_name": "Crossref Data File Full Ingest",
    "process_description": "Extracts authors (creators/contributors), affiliations, RORs from full public data file JSONL.gz dumps."
  },
  "record_identifier": {
    "path": "/id",
    "required": true
  },
  "deterministic_ids": {
    "record_prefix": "rec",
    "value_prefix": "val",
    "value_format": "{value_type}:{value_content}"
  },
  "null_values": {
    "null_author": {
      "value_type": "author_name",
      "content": "<NULL_AUTHOR_NAME_CONTENT>"
    },
    "null_affiliation": {
      "value_type": "affiliation",
      "content": "<NULL_AFFILIATION_CONTENT>"
    },
    "null_ror_id": {
      "value_type": "ror_id",
      "content": "<NULL_ROR_ID_CONTENT>"
    }
  },
  "filters": [
     {
      "cli_arg": "member",
      "path": "/attributes/member"
    },
    {
      "cli_arg": "doi_prefix",
      "path": "/attributes/prefix",
      "fallback_from": "/id"
    }
  ],
  "entities": [
    {
      "name": "Author",
      "path": "/attributes/creators",
      "is_array": true,
      "relationship_to_record": "has_author",
      "value_extraction": {
        "type": "field",
        "field": "name",
        "target_value_type": "author_name",
        "use_null": "null_author"
      },
      "nested_entities": [
        {
          "name": "Affiliation",
          "path": "affiliation",
          "is_array": true,
          "relationship_to_parent": "has_affiliation",
          "value_extraction": {
            "type": "field",
            "field": "name",
            "target_value_type": "affiliation",
            "use_null": "null_affiliation"
          },
          "related_values": [
            {
              "name": "ROR_ID",
              "path": ".",
              "is_array": false,
              "filter_condition": {
                "field": "affiliationIdentifierScheme",
                "equals": "ROR",
                "case_insensitive": true
              },
              "extract_value": {
                "type": "field",
                "field": "affiliationIdentifier",
                "target_value_type": "ror_id",
                "use_null": "null_ror_id"
              },
              "relationship_to_parent": "identified_by",
              "take_first_match": true
            }
          ]
        }
      ]
    },
    {
      "name": "Author",
      "path": "/attributes/contributors",
      "is_array": true,
      "relationship_to_record": "has_author",
      "value_extraction": {
        "type": "field",
        "field": "name",
        "target_value_type": "author_name",
        "use_null": "null_author"
      },
      "nested_entities": [
        {
          "name": "Affiliation",
          "path": "affiliation",
          "is_array": true,
          "relationship_to_parent": "has_affiliation",
          "value_extraction": {
            "type": "field",
            "field": "name",
            "target_value_type": "affiliation",
            "use_null": "null_affiliation"
          },
          "related_values": [
            {
              "name": "ROR_ID",
              "path": ".",
              "is_array": false,
              "filter_condition": {
                "field": "affiliationIdentifierScheme",
                "equals": "ROR",
                "case_insensitive": true
              },
              "extract_value": {
                "type": "field",
                "field": "affiliationIdentifier",
                "target_value_type": "ror_id",
                "use_null": "null_ror_id"
              },
              "relationship_to_parent": "identified_by",
              "take_first_match": true
            }
          ]
        }
      ]
    }
  ]
}